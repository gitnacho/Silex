``TwigServiceProvider``
=======================

El ``TwigServiceProvider`` proporciona integración con el motor de plantillas `Twig <http://http://gitnacho.github.com/Twig/intro.html>`_.

Parámetros
----------

* **twig.path** (opcional): Ruta al directorio que contiene archivos de plantilla *Twig* (también puede ser un arreglo de rutas).

* **twig.templates** (opcional): Se trata de una matriz asociativa de nombres de plantilla para el contenido de la plantilla. Usa esta opción si deseas definir tus plantillas en línea.

* **twig.options** (opcional): Una matriz asociativa de opciones *Twig*. Echa un vistazo a la documentación de *Twig* para más información.

* **twig.form.templates** (opcional): Una matriz de plantillas utilizada para reproducir formularios (disponible únicamente cuando está habilitado el ``FormServiceProvider``).

Servicios
---------

* **twig**: La instancia de ``Twig_Environment``. La principal forma de interactuar con *Twig*.

* **twig.configure**: :ref:`Cierre protegido </services#cierres-protegidos>` que toma el entorno *Twig* como argumento. Lo puedes utilizar para agregar más globales personalizadas.

* **twig.loader**: El cargador de plantillas *Twig* utiliza las opciones ``twig.path`` y ``twig.templates``. También puedes reemplazar el cargador completamente.

Registrando
-----------

.. code-block:: php

    $app->register(new Silex\Provider\TwigServiceProvider(), array(
        'twig.path' => __DIR__.'/views',
    ));

.. note::

    *Twig* no viene en los archivos ``silex``, por lo tanto necesitas añadirlo como dependencia en tu archivo :file:`composer.json`:

    .. code-block:: json

        "require": {
            "twig/twig": ">=1.8,<2.0-dev"
        }

Integrando componentes de *Symfony2*
------------------------------------

*Symfony* incluye un puente a *Twig* que proporciona integración adicional entre algunos componentes de *Symfony2* y *Twig*. Añádelo como dependencia a tu archivo :file:`composer.json`:

.. code-block:: json

    "require": {
        "symfony/twig-bridge": "2.1.*",
    }

Cuando está presente el ``TwigServiceProvider`` te proporcionará las siguientes capacidades adicionales:

* **UrlGeneratorServiceProvider**: Si estás usando el ``UrlGeneratorServiceProvider``, tendrás acceso a las funciones ``path()`` y ``url()`` functions. Puedes encontrar más información en la documentación de `enrutado de Symfony2 <http://gitnacho.github.com/symfony-docs-es/book/routing.html#generando-url-desde-una-plantilla>`_.

* **TranslationServiceProvider**: Si estás usando el ``TranslationServiceProvider``, obtendrás las funciones ``trans()`` y ``transchoice()`` para traducción en plantillas *Twig*. Puedes encontrar más información en la documentación de `traducción de Symfony2 <http://gitnacho.github.com/symfony-docs-es/book/translation.html#plantillas-twig>`_.

* **FormServiceProvider**: Si estás usando el ``FormServiceProvider``, recibirás un conjunto de ayudantes para trabajar con formularios en plantillas. Puedes encontrar más información en la `referencia de formularios de Symfony2 <http://gitnacho.github.com/symfony-docs-es/reference/forms/twig_reference.html>`_.

Uso
---

El proveedor *Twig* ofrece un servicio ``twig``::

    $app->get('/hello/{name}', function ($name) use ($app) {
        return $app['twig']->render('hello.twig', array(
            'name' => $name,
        ));
    });

Esto reproducirá un archivo llamado ``views/hola.twig``.

En cualquier plantilla de *Twig*, la variable ``app`` se refiere al objeto ``Aplicación``.
Para que puedas acceder a cualquier servicio desde tu vista. Por ejemplo, para acceder a ``$app['request']->getHost()``, sólo tienes que poner esto en tu plantilla:

.. code-block:: jinja

    {{ app.request.host }}

También se registra una función ``render`` para ayudarte a reproducir otro controlador desde una plantilla:

.. code-block:: jinja

    {{ render('/sidebar') }}

    {# o si también estás usando UrlGeneratorServiceProvider con el SymfonyBridgesServiceProvider #}
    {{ render(path('sidebar')) }}

Para más información, consulta la `documentación de
Twig <http://gitnacho.github.com/Twig/index.html>`_.
